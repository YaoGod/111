<div class="content-area">
  <div class="content-inner">

    <!--搜索栏-->
    <div class="search-bar">
      <ul class="clearfix">
        <li><label>群组名称</label>
          <input type="text" name="searchUserId" [(ngModel)]="search.name">
        </li>
        <li><label>群组状态</label>
          <select name="searchDeptId" [(ngModel)]="search.status">
            <option value="">全部</option>
            <option [value]="1">可用</option>
            <option [value]="0">不可用</option>
          </select>
        </li>
        <li style="float:right">
          <a (click)="getGroupList(1);"><i class="icon-magnifier"></i>&nbsp;查询</a>
        </li>
        <li style="float:right">
          <a (click)="newUser();"><i class="icon-plus"></i>&nbsp;新增</a>
        </li>
        <li style="float:right">
          <a [href]="ipSetting.ip+'/workflow/group/downloadTemplate'">模板下载</a>
        </li>
      </ul>
    </div>
    <!--表头-->
    <div class="table-head" style="margin-top: 10px">
      <table border="0" cellspacing="0" cellpadding="0" class="list-box">
        <tr class="row list-title" style="height:45px;">
          <th width="20%" class="text-left">群组名称</th>
          <th width="20%" class="text-left">关联部门</th>
          <th width="20%" class="text-left">群组状态</th>
          <th width="20%" class="text-left">操作</th>
        </tr>
      </table>
    </div>
    <!--表格内容-->
    <div class="table-content" style="min-height: 360px">
      <table border="0" cellspacing="0" cellpadding="0" class="list-box">
        <tr class="row" *ngFor="let flow of flowList;let i = index">
          <td width="12%" class="text-left">
            {{flow.name}}
          </td>
          <td *ngIf="flow.isdept==='0'" width="12%" class="text-left">
            否
          </td>
          <td *ngIf="flow.isdept==='1'" width="12%" class="text-left">
            是
          </td>
          <td *ngIf="flow.status==='1'" width="12%" class="text-left" style="color:#00a379;">
            可用
          </td>
          <td *ngIf="flow.status==='0'" width="12%" class="text-left" style="color: #ff0000;">
            不可用
          </td>
          <td width="12%" class="text-left">
            <i class="icon-eye" style="font-size: 18px;" title="查看" (click)="checkPerson(flow.id)"></i>
            <i *ngIf="flow.status==='1'" class="icon-plus" title="增加人员" (click)="addPerson(flow.id)"></i>
            <i class="icon-pencil" title="编辑" (click)="editName(flow.id,flow.name,flow.isdept)"></i>
            <i *ngIf="flow.status==='0'" class="icon-check" title="可用" (click)="abateNameOK(flow.id)"></i>
            <i *ngIf="flow.status==='1'" class="icon-ban" title="不可用" (click)="abateNameNO(flow.id)"></i>
          </td>
        </tr>
      </table>
      <div class="div-none" *ngIf="flowList.length === 0">
        <p>暂无信息</p>
      </div>
    </div>
    <!--翻页-->
    <app-turn-bar
      [pageNo] = "pageNo"
      [pageSize] = "pageSize"
      [total] = "total"
      (turnEvent) = "getGroupList($event)">
    </app-turn-bar>
    <div class="mask" id="newUser">
      <div class="modal-content" style="width: 360px;margin-left: -180px">
        <div class="modal-header">
          <h4 class="modal-title">工作流群组新增</h4>
          <button class="modal-close" type="button" (click)="closeNewUser()">×</button>
        </div>
        <form class="form-building form-material">
          <div class="modal-body clearfix">
            <div class="modal-newuser">
              <div class="form-group">
                <label class="control-label"><span>群组名称</span>
                  <input type="text" class="form-control" id="groupName" name="groupName" maxlength="20"
                         [(ngModel)]="flowConfigure.name" (blur)="verifyEmpty(flowConfigure.name,'groupName')">
                </label>
                <div class="error"></div>
              </div>
              <div class="form-group" *ngIf="editBoole===true">
                <label class="control-label"><span>关联部门</span>
                  <label for="yes">
                    <input id="yes" name="yes" type="radio" value="1" [(ngModel)]="flowConfigure.isdept">
                    是
                  </label>
                  <label>&nbsp;&nbsp;</label>
                  <label for="no">
                    <input id="no" name="no" type="radio" value="0" [(ngModel)]="flowConfigure.isdept">
                    否
                  </label>
                  <div class="error"></div>
                </label>
              </div>
            </div>
          </div>
        </form>
        <div class="modal-footer">
          <button class="btn btn-info" type="submit"
                  (click)="submitNew()">确 定
          </button>
        </div>
      </div>
    </div>

    <div class="mask1">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title"><i class="icon-home"></i>&nbsp;群组人员新增</h4>
          <button class="modal-close" type="button" (click)="closeNewUser()">×</button>
        </div>
        <div class="modal-body clearfix">
          <div class="modal-search">
            <ul class="clearfix">
              <li><label>HRMIS</label>
                <input type="text" name="searchUserId" [(ngModel)]="searchPerson.userid">
              </li>
              <li><label>员工姓名</label>
                <input type="text" name="searchUserName" [(ngModel)]="searchPerson.username">
              </li>
              <li><label>员工部门</label>
                <select name="searchDeptId" [(ngModel)]="searchPerson.deptId" style="width: 168px;">
                  <option value="">全部</option>
                  <option *ngFor="let dept of deptList" [value]="dept.DEPT_ID">{{dept.DEPT_NAME}}</option>
                </select>
              </li>
              <li style="float:right">

                <a (click)="getUserList();"><i class="icon-magnifier"></i>&nbsp;查 询</a>
                <a href="javascript:;" onclick="$('#prese').trigger('click')"><i class="icon-docs"></i> 导 入</a>
                <input type="file" value="" id="prese" #prese (change)="prese_upload(prese.files)" accept="application/vnd.ms-excel,.xlsx" style="display: none;">
              </li>
            </ul>
          </div>
          <div class="modal-inner clearfix">
            <div class="modal-left">
              <h3>查询人员：</h3>
              <ul class="all-list">
                <li *ngFor="let person of userList">{{person.deptId}}[{{person.userid}}]<span>{{person.username}}</span>
                  <a href="javascript:;" (click)="addPersonList(person.userid)">+加入群组</a>
                </li>
              </ul>
            </div>
            <div class="modal-middle">
              <div>></div>
            </div>
            <div class="modal-right">
              <h3>群组人员：</h3>
              <ul class="group-list">
                <li *ngFor="let person of personList">{{person.deptId}}[{{person.userid}}]<span>{{person.username}}</span>
                  <a href="javascript:;" (click)="delPersonList(person.userid)">× 删除</a>
                </li>
              </ul>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-info" type="submit"
                  (click)="closeNewUser()">关 闭
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mask2">
  <div class="modal-content modal-check">
    <div class="modal-header">
      <h4 class="modal-title"><i class="icon-home"></i>&nbsp;群组人员查看</h4>
      <button class="modal-close" type="button" (click)="closeNewUser()">×</button>
    </div>
    <div class="modal-body clearfix">
      <div class="modal-inner clearfix">
          <h3>群组人员：</h3>
          <ul class="check-list">
            <li *ngFor="let person of personList">[{{person.userid}}]<span>{{person.username}}</span>{{person.deptId}}
            </li>
          </ul>
        </div>
    </div>
    <div class="modal-footer">
      <button class="btn btn-info" type="submit"
              (click)="closeNewUser()">关 闭
      </button>
    </div>
  </div>
</div>
