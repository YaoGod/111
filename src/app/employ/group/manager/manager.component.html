
<div class="right">
  <div class="wrap-content">
    <div class="wrap-space">
      <div class="wrap-b">
        <div class="b-head clearfix">
          <div class="b-head-left">
            <span [routerLink]="['../product']">团购商品新增</span>
            <span [routerLink]="['../check']">团购商品审核</span>
            <span class="active" >团购商品管理</span>
            <span [routerLink]="['../order']">订单管理</span>
            <span [routerLink]="['../notice']">公告管理</span>
            <span [routerLink]="['../report']">订单报表</span>
            <span [routerLink]="['../count']">统计报表</span>
          </div>
          <div class="b-head-right">
            <div class="content-box" [routerLink]="['../groupbuy']"><i class="icon-action-undo"></i> 继续订购</div>
          </div>
        </div>
        <div class="b-con tuanmenu">
          <div class="wrap clearfix">
            <div class="iptgroup">
              <input placeholder="请输入商品名称" [(ngModel)]="search.name" />
            </div>
            <a class="search" href="javascript: void(0);" (click)="getProductList()" >查询</a>
          </div>

          <div class="list-table">
            <table class="table-head">
              <td class="fir">商品信息</td>
              <td class="sec">单价(元)</td>
              <td class="sec">状态</td>
              <td class="three">审核意见</td>
              <td class="four">标签</td>
              <td class="five">团购时间</td>
              <td class="six">发起信息</td>
            </table>
            <dl *ngFor="let product of groupProducts;let idx=index">
              <dt><span>商品名称：{{product.name}}</span>
              <div class="ope-list">
                <a class="two"   title="修改" href="javascript:void(0);" (click)="update(product.code)"></a>
                <a class="tre"   title="删除" href="javascript:void(0);" (click)="delete(product.code)"></a>
              <button type="button" class="btn btn-info" *ngIf="product.status=='2'" style="padding: 2px 2px;float:inherit;"
                      (click)="updateStatus(product.code,'1')">上架</button>
              <button type="button" class="btn btn-info" *ngIf="product.status=='1'" style="padding: 2px 2px;float:inherit;"
                      (click)="updateStatus(product.code,'2')">下架</button>
              </div>
              </dt>
              <dd>
                <table style="width: 100%;">
                  <tr>
                    <td class="fir">
                      <img *ngIf="product.image!==''" [src]="'/proxy/' + product.image" />
                    </td>
                    <td class="sec">{{product.price}}</td>
                    <td class="sec" >
                      <label *ngIf="product.status=='0'">录入</label>
                      <label *ngIf="product.status=='1'">上架</label>
                      <label *ngIf="product.status=='2'">下架</label>
                      <label *ngIf="product.checkStatus=='0'">（待审核）</label>
                      <label *ngIf="product.checkStatus=='1'" style="color: green;">（审核通过）</label>
                      <label *ngIf="product.checkStatus=='2'" style="color: red;">（不通过）</label>
                    </td>
                    <td class="three" >{{product.checkResult}}</td>
                    <td class="four">{{product.label}}</td>
                    <td class="five">
                      <span>{{product.startTime}}</span>
                      <span>至</span>
                      <span>{{product.endTime}}</span>
                    </td>
                    <td class="six">
                      <span>{{product.contact}}</span>
                      <span>{{product.phone}}</span>
                    </td>
                  </tr>
                  <tr>
                    <td  style="text-align: left; padding:0 10px 10px;" colspan="6" > 简介：<p class="con">{{product.detail}}</p></td>
                  </tr>
                </table>
              </dd>
            </dl>
          </div>
          <app-turn-bar
            [pageNo]="pageNo"
            [pageSize]="pageSize"
            [total]="total"
            [length] = 5
            (turnEvent)="goPage($event)">
          </app-turn-bar>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="mask2">
  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title">修改商品</h4>
      <button type="button" class="close" (click)="closeMask2()">×</button>
    </div>
    <form class="form-building form-material">
      <div class="modal-body ">
        <div class="protop clearfix">
          <div class="pimg">
            <div class="dropify-wrapper">
              <div class="dropify-message">
                <img *ngIf="upGroupProduct.image!==''" [src]="'/proxy/' + upGroupProduct.image" />
              </div>
              <p>点击此处上传图片</p>
              <input type="file" class="dropify" #prese2 id="prese2" (change)="prese_upload2(prese2.files)">
            </div>
          </div>
          <div class="pdetail">
            <div class="for">
              <label>商品名称：</label>
              <input type="text" class="producttext" id="upnewname" name="upnewname"  (blur)="verifyEmpty('upnewname','商品名称不能为空')"   [(ngModel)]="upGroupProduct.name">
              <span class="errorMessage"></span>
            </div>
            <div class="for">
              <div>
                <label>收款账号：</label>
                <input type="text" class="producttext" id="upnewpayaccount" name="upnewpayaccount" (blur)="verifyEmpty('upnewpayaccount','账户不能为空')"   [(ngModel)]="upGroupProduct.payaccount">
                <span class="errorMessage"></span>
              </div>
            </div>
            <div class="for">
              <div  style="width: 55%">
                <label>商品标签：</label>
                <input type="text" class="producttext" id="upnewlabel" name="upnewlabel"   [(ngModel)]="upGroupProduct.label">
                <input type="hidden"  id="upnewstatus" name="upnewstatus"   [(ngModel)]="upGroupProduct.status">
              </div>
              <div style="width: 50%">
                <label>商品价格：</label>
                <input type="text" class="producttext" style="width: 81px" id="upnewprice" name="upnewprice"
                       (blur)="verifyEmpty('upnewprice','费用不能为空')"  [(ngModel)]="upGroupProduct.price">元
                <span class="errorMessage"></span>
              </div>
            </div>
            <div class="for">
              <div style="width: 55%">
                <label>联 系 人：</label>
                <input type="text" class="producttext" style="width: 81px" name="upnewpconcant" id="upnewpconcant"
                       (blur)="verifyEmpty('upnewpconcant','不能为空')"  [(ngModel)]="upGroupProduct.contact">
                <span class="errorMessage"></span>
              </div>
              <div style="width: 50%">
                <label>联系电话：</label>
                <input type="text" class="producttext"  style="width:81px" id="upnewphone" name="upnewphone"
                       (blur)="verifyEmpty('upnewphone','电话不能为空')" [(ngModel)]="upGroupProduct.phone">
                <span class="errorMessage"></span>
              </div>
            </div>
            <div class="for" style="margin-top: 15px">
              <label>团购时间：</label>
              <input type="date" class="producttext" name="upnewstartTime"  id="upnewstartTime" (blur)="verifyEmpty('upnewstartTime','不能为空')"
                     style="width:118px !important;"   [(ngModel)]="upGroupProduct.startTime" >
              <span class="errorMessage"></span>
              至
              <input type="date" class="producttext" name="upnewendTime" id="upnewendTime" (blur)="verifyEmpty('upnewendTime','不能为空')"
                     style="width:118px !important;margin-left: 5px"  [(ngModel)]="upGroupProduct.endTime" >
              <span class="errorMessage"></span>
            </div>
          </div>
        </div>
        <div class="modal-right2">
          <label>商品详情：</label>
          <textarea name="upnewesetail" ui-tinymce
                    class="form-control" rows="10"
                    id="upnewesetail" (blur)="verifyEmpty('upnewesetail','商品详情不能为空')"  [(ngModel)]="upGroupProduct.detail"
                    style="margin-left:73px;margin-top:-20px;border:1px solid #dddddd;width: 88%;!important;height: 140px;background-color: #ffffff !important;"  value="{{upGroupProduct.detail}}" >
               </textarea>
          <span class="errorMessage" style="display: block; margin-left: 73px;"></span>
        </div>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-danger" (click)="closeMask2()">取 消</button>
        <button type="submit" class="btn btn-info"   (click)="updateGroupProduct()" >保 存</button>
      </div>
    </form>
  </div>
</div>
