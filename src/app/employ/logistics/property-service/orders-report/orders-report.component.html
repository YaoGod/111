<div class="container clearfix">
  <div class="chandlery clearfix">
    <ul class="search clearfix">
      <li>
        <label>大楼名称</label>
        <select  name="searchbuildingName" class="search-ipt search-sel" [(ngModel)]="searchArch.buildingName">
          <option value="">全部</option>
          <option *ngFor="let num of buildings"
                  [value]="num.NAME">
            {{num.NAME}}</option>
        </select>
      </li>
      <li>
        <label>订单号</label>
        <input type="text" name="searchorderNum" class="search-ipt" [(ngModel)]="searchArch.orderId">
      </li>
      <li>
        <label>订单状态</label>
        <select name="searchorderState" class="search-ipt search-sel" [(ngModel)]="searchArch.orderStatus">
          <option value="">全部</option>
          <option value="1">订购中</option>
          <option value="3">退单</option>
          <option value="4">已完成</option>
        </select>
      </li>
      <li>
        <label>开始时间</label>
        <input type="date" name="searchbTime" class="search-ipt" [(ngModel)]="searchArch.startTime">
      </li>
      <li>
        <label>结束时间</label>
        <input type="date" name="searcheTime" class="search-ipt" [(ngModel)]="searchArch.finshTime">
      </li>
      <li>
        <label>订单人</label>
        <input type="text" name="searchorderPerson" class="search-ipt" [(ngModel)]="searchArch.serverUserid">
      </li>
      <li>
        <label>订单部门</label>
        <!--<input  type="text" name="searchorderDepart" class="search-ipt" [(ngModel)]="searchArch.userDept">-->
        <select class="search-ipt" name="searchorderDepart" [(ngModel)]="searchArch.userDept">
          <option value="">-请选择-</option>
          <option *ngFor="let dept of repairDept" [value]="dept.DEPT_NAME">{{dept.DEPT_NAME}}</option>
        </select>
      </li>
    </ul>
    <div class="search-right"><a href="javascript:;" class="search-btn" (click)="repairSearch(1)"><i class="icon-magnifier"></i> 查 询</a></div>
  </div>
  <div class="row text-right" >
    <a class="btn btn-new" href="javascript:;" (click)="outOrder()"><i class="icon-docs"></i> 导 出</a>
  </div>
  <!--订单列表-->
  <div class="order-container">
    <div class="form-msg" *ngFor="let inner of record; let i=index">
      <ul class="clearfix">
        <li class="form-bar">
          <span class="form-title text-right">订单号</span>
          <span class="form-word">{{inner.orderId}}</span>
        </li>
        <!--<li class="form-bar">
          <span class="form-title text-right">大楼编号</span>
          <span class="form-word">{{inner.buildingNum}}</span>
        </li>-->
        <li class="form-bar">
          <span class="form-title text-right">订单人</span>
          <span class="form-word">{{inner.username}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">订单状态</span>
          <span class="form-word">{{inner.orderStatus}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">大楼名称</span>
          <span class="form-word">{{inner.buildingName}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">物业服务项目</span>
          <span class="form-word">{{inner.propertyType}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">服务内容</span>
          <span class="form-word">{{inner.propertyName}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">服务楼层</span>
          <span class="form-word">{{inner.floorId}}</span>
        </li>
        <li class="form-bar">
          <span class="form-title text-right">服务房间</span>
          <span class="form-word">{{inner.roomId}}</span>
        </li>
      </ul>
      <div class="form-detail">
        <h4>服务具体内容</h4>
        <p>{{inner.porpertyContent}}</p>
      </div>
      <div class="form-attach">
        <h4>附件</h4>
        <ol *ngIf="inner.fileName" style="height:120px; overflow-y: auto;">
          <li style="word-break: break-all; margin-bottom:4px;" *ngFor="let abc of inner.fileName; let j=index">{{abc}}
            <a [href]="URL +'/common/file/downLoadFile?path='+ inner.filePath[j]" [download]="abc"><i class="icon-cloud-download">下载</i></a>
          </li>
        </ol>
      </div>
      <div class="form-btn" (click)="editAttach(i)" title="查看"><i class="icon-doc"></i></div>
      <!--<div class="form-btn form-del" (click)="delAttach(i)"><i class="icon-trash"></i></div>-->
    </div>
  </div>
  <app-turn-bar
    [pageNo]="pageNo"
    [pageSize]="pageSize"
    [total]="total"
    [length] = 5
    (turnEvent)="goPage($event)">
  </app-turn-bar>
</div>
<!--查看订单弹窗-->
<div class="mask">
  <div class="new-order">
    <div class="mask-head"><i class="icon-film"></i> <p>新增物业订单</p>
      <button class="close" (click)="contractCancel()">×</button>
    </div>
    <form method="post" name="topForm" class="repair-form">
      <div class="form-control">
        <span class="form-label">大楼名称</span>
        <div class="form-inp">
          <input id="buildingId" name="buildingId" class="company-ipt company-sel" [(ngModel)]="repairname.buildingName"
                 (blur)="verifybuildingId()" disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务楼层</span>
        <div class="form-inp">
          <input type="text" id="buildingFloor" class="company-ipt company-sel" name="buildingFloor"
                 disabled="disabled" [(ngModel)]="repairname.floorId">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务房间</span>
        <div class="form-inp">
          <input type="text" id="roomNum" class="company-ipt" name="roomNum" [(ngModel)]="repairname.roomId"
                 disabled="disabled" required maxlength="5"/>
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务项目</span>
        <div class="form-inp">
          <input id="type" name="type" class="company-ipt company-sel" [(ngModel)]="repairname.propertyType"  disabled="disabled"/>
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务内容</span>
        <div class="form-inp">
          <input id="servername" name="servername" class="company-ipt company-sel" [(ngModel)]="repairname.propertyName"
                 disabled="disabled">
        </div>
      </div>
      <div class="form-control  clearfix" *ngIf="onNum==='1'">
        <span class="form-label" *ngIf="repairname.type!=='节假日停车'">剩余库存</span>
        <span class="form-label" *ngIf="repairname.type==='节假日停车'">剩余车位</span>
        <div class="form-inp">
          <input id="number" name="number" type="number" class="company-ipt company-sel" [(ngModel)]="repairname.amount"
                 disabled="disabled">
        </div>
      </div>
      <div class="form-control" *ngIf="repairname.type==='节假日停车'">
        <span class="form-label">车牌信息</span>
        <div class="form-inp">
          <input id="plateNum" name="plateNum" class="company-ipt company-sel" [(ngModel)]="repairname.plateNum"
                 disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">订单人</span>
        <div class="form-inp">
          <input type="text" class="company-ipt" name="username" [(ngModel)]="repairname.username" required maxlength="25"
                 disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">订单部门</span>
        <div class="form-inp">
          <input type="text" id="employeeDepart" class="company-ipt" name="employeeDepart" [(ngModel)]="repairname.userDept"
                 maxlength="25" disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">订单人电话</span>
        <div class="form-inp">
          <input id="employeePhone" name="employeePhone" class="company-ipt" [(ngModel)]="repairname.userTel" disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务人员姓名</span>
        <div class="form-inp">
          <input id="serverPersonName" name="serverPersonName" class="company-ipt" [(ngModel)]="repairname.serverPersonName"
                 type="text" disabled="disabled">
        </div>
      </div>
      <div class="form-control">
        <span class="form-label">服务人员电话</span>
        <div class="form-inp">
          <input id="serverPersonTel" name="serverPersonTel" class="company-ipt" [(ngModel)]="repairname.serverPersonTel"
                 type="text" disabled="disabled">
        </div>
      </div>

      <div class="form-control form-alone">
        <span class="form-label">服务内容描述</span>
        <div class="form-inp form-text">
          <textarea id="liableNote" maxlength="500" name="liableNote" class="company-ipt" [(ngModel)]="repairname.porpertyContent"
                    disabled="disabled" (blur)="verifydetail()">
          </textarea>
          <span class="errorMessage"></span>
        </div>
      </div>

      <div class="form-control form-alone">
        <span class="form-label">附件</span>
        <ul class="contract-list">
          <li *ngFor="let abc of repairname.fileName; let k=index" style="word-wrap:break-word; margin-bottom:4px;">{{abc}}
          </li>
        </ul>
        <!--<div class="form-inp" style=" margin-top:5px;">
          <a href="javascript:;" style="color:#666; margin-left:127px; border-radius:4px; padding:5px 10px; background: #f6f6f6;" onclick="$('#prese').trigger('click')">上 传</a>
          <input type="file" class="dropify" #prese id="prese" style="visibility: hidden;"
                 (change)="prese_upload(prese.files)">
        </div>-->
      </div>
    </form>
    <div class="mask-footer">
      <button type="submit" class="btn-mask btn-info" (click)="contractSubmit()">确 定</button>
      <!--<button type="button" class="btn-mask btn-danger" (click)="contractCancel()">取 消</button>-->
    </div>
  </div>
</div>
<!-- Deriving 导出 -->
<div class="modal-back" id= "deriving" style="_display:none;">
  <div class="modal">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">导 出</h4>
          <button type="button" class="close pull-right" (click)="closeDeriving()">×</button>
        </div>
        <div class="modal-body">
          <!-- excel 导出 -->
          <div class="excel-out">
            <p>信息表.xls</p>
          </div>
          <!-- footer -->
          <div class="foot">
            <button type="submit" class="btn-mask btn-info" (click)="downDeriving()">确 定</button>
            <button type="button" class="btn-mask btn-danger" (click)="closeDeriving()">取 消</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
