<!--搜索栏-->
<!--<div class="search-bar">
  <ul>
    <li>
      <label>房间号</label>
      <select [(ngModel)]="searchFloor.floorNum">
        <option value="">全部</option>
        <option *ngFor="let name of floorNames" [value]="name.FLOOR_NUM">{{name.FLOOR_NUM}}</option>
      </select>
    </li>
    <li>
      <label>楼层功能 </label>
      <select  class="form-control"
               name="floorUse" [(ngModel)]="searchFloor.floorUse">
        <option value="">请选择</option>
        <option>车库</option>
        <option>大厅</option>
        <option>餐厅</option>
        <option>办公层</option>
        <option>设备机房层</option>
        <option>多功能厅</option>
        <option>员工活动层</option>
        <option>其他</option>
      </select>
    </li>
    <li>
      <div class="search-icon" >
        <img src="../../../../assets/image/icon_search.png">
      </div>
      <input class="search-btn" type="button" value="查询" (click)="search();">
    </li>
  </ul>
</div>-->
<div class="box-plus">
  <h3>当前楼层：{{floor.floorNum}}</h3>
  <a class="btn-danger" (click)="addNewRoom()">
    <i class="icon-plus"></i>
    新增
  </a>
</div>
<!--表头
<div class="table-head">
  <table border="0" cellspacing="0" cellpadding="0" class="list-box">
    <tr class="row list-title" style="height:45px;">
      <th width="8%" class="text-left" style="min-width: 50px;">房间号</th>
      <th width="17%">房间用途</th>
      <th width="8%" style="min-width: 70px;">房间面积</th>
      <th width="8%" style="min-width: 90px;">设计座位数</th>
      <th width="21%" class="text-left">房间实际用途</th>
      <th width="25%">房间平面图</th>
      <th width="15%">操作</th>
    </tr>
  </table>
</div>-->
<!--表格内容-->
<!--<div class="table-content" style="height: 390px">
  <table border="0" cellspacing="0" cellpadding="0" class="list-box">
    <tr class="row"  style="height:45px;" *ngFor="let room of rooms;let i = index">
      <td width="8%" class="text-left">
        <span *ngIf="!copyRooms[i].editStatus">
          {{room.roomNum}}
        </span>
     &lt;!&ndash;   <input type="text" name="roomNum"
               id="roomNum"
               *ngIf="copyRooms[i].editStatus"
               [(ngModel)]="copyRooms[i].roomNum">&ndash;&gt;
      </td>
      <td width="17%">
        <span *ngIf="!copyRooms[i].editStatus">
          {{room.roomUse}}
        </span>
        <select  id="roomUse"
          *ngIf="copyRooms[i].editStatus"
           [(ngModel)]="copyRooms[i].roomUse">
          <option value="">请选择</option>
          <option>总经理办公室</option>
          <option>副总经理办公室</option>
          <option>中层办公室</option>
          <option>员工办公室</option>
          <option>会议室</option>
          <option>电视电话会议室</option>
          <option>接待室</option>
          <option>休息间</option>
          <option>茶水间</option>
          <option>文印室</option>
          <option>员工餐厅</option>
          <option>餐厅包间</option>
          <option>厨房</option>
          <option>洗手间</option>
          <option>设备间</option>
          <option>多功能厅</option>
          <option>活动室</option>
          <option>职工小小家</option>
          <option>员工服务中心</option>
          <option>其他</option>
        </select>
      </td>
      <td width="8%" style="min-width: 70px;">
        <span *ngIf="!copyRooms[i].editStatus">
          {{room.roomArea}}
        </span>
      &lt;!&ndash;  <input type="text" name="roomArea"
               id="roomArea"
               *ngIf="copyRooms[i].editStatus"
               [(ngModel)]="copyRooms[i].roomArea">&ndash;&gt;
      </td>
      <td width="8%" style="min-width: 90px;">
        <span *ngIf="!copyRooms[i].editStatus">
          {{room.seatingNum}}
        </span>
     &lt;!&ndash;   <input type="text" name="seatingNum"
               id="seatingNum"
               *ngIf="copyRooms[i].editStatus && copyRooms[i].roomUse === '员工办公室'"
               [(ngModel)]="copyRooms[i].seatingNum">&ndash;&gt;
      </td>
      <td width="21%" class="text-left">
        <span *ngIf="!copyRooms[i].editStatus">
          {{room.roomUseReal}}
        </span>
      &lt;!&ndash;  <textarea name="roomUseReal" id="roomUseReal"
                  *ngIf="copyRooms[i].editStatus"
                  [(ngModel)]="copyRooms[i].roomUseReal">
        </textarea>&ndash;&gt;
      </td>
      <td width="25%" class="box-demo">
        <img *ngIf="room.imgPath && !copyRooms[i].editStatus"
             [src]="'/proxy' + room.imgPath"
             (click)="viewImg(room.imgPath)">
        <img src="../../../../assets/image/icon_img.png" *ngIf="!room.imgPath && !copyRooms[i].editStatus">
      &lt;!&ndash;  <div  *ngIf="copyRooms[i].editStatus" class="btn-upload" id="imgView">
          <img [src]="'/proxy' + copyRooms[i].imgPath"
               (click)="viewImg(copyRooms[i].imgPath)">
          <img src="../../../../assets/image/icon_img.png" *ngIf="!copyRooms[i].imgPath && copyRooms[i].editStatus">
          <a>上传
            <input type="file" name="imgPath" class="img-upload" #prese [id]="'prese'+i"
                   (change)="prese_upload(prese.files,i)">
          </a>
        </div>&ndash;&gt;
      </td>
      <td width="13%" class="box-option">
        <img src="../../../../assets/image/icon_edit.png" (click)="initEdit(i)">
      &lt;!&ndash;  <img src="../../../../assets/image/icon_save.png"
             [ngClass]="!copyRooms[i].editStatus?'disable':''"
             (click)="save(i)">&ndash;&gt;
        <img src="../../../../assets/image/icon_can.png" (click)="delRoom(room.id)">
      </td>
    </tr>
  </table>
</div>-->
<div class="room-list" *ngIf="rooms">
  <ul>
    <li class="room-card" *ngFor="let room of rooms;let i = index">
      <h5> {{room.roomUse}}</h5>
      <div class="card-border">
        <h6>{{room.roomNum}}室
          <i class="icon-pencil" (click)="initEdit(i)"> </i>
          <i class="icon-trash"(click)="delRoom(room.id)"> </i>
        </h6>
        <div class="card-left">
          <label>
            <span class="form-title">房间面积</span>
            <p>{{room.roomArea}}</p>
          </label>
          <label *ngIf="room.seatingNum">
            <span class="form-title">设计座位数</span>
            <p>{{room.seatingNum}}</p>
          </label>
          <label>
            <span class="form-title">实际用途</span>
            <p>{{room.roomUseReal}}</p>
          </label>
        </div>
        <div class="card-right">
          <div  class="card-wrapper">
            <div  class="card-message">
              <img [src]="'/proxy'+room.imgPath" *ngIf="room.imgPath"  (click)="viewImg(room.imgPath)">
              <div class="text-center">
                <a class="text-muted font-12" href="javascript:;"  (click)="viewImg(room.imgPath)">
                  <i class="icon-magnifier-add"></i> 放大
                </a>
              </div>
            </div>
          </div>
        </div>
        <div style="clear: both"></div>
      </div>
    </li>
  </ul>
</div>
<div class="div-none" *ngIf="copyRooms.length < 1">
  <p>暂无信息</p>
</div>
<!--翻页-->
<div class="turn-box">
  <div class="turn">
    <ul *ngIf="pages.length > 1">
      <li *ngFor="let i of pages"
          [hidden] = "pageLimit(i)"
          [ngClass]="{'active':i === pageNo}"
          (click)="goPage(i);">
        {{i}}
      </li>
    </ul>
    <div style="clear: both"></div>
  </div>
</div>
<!--新建-->
<div class="mask" style="display: none;">
  <div  class="modal-content">
    <div  class="modal-header">
      <h4 class="modal-title"><i class="icon-home"></i>{{title}}房间信息</h4>
      <button class="modal-close" type="button" (click)="closeNewView()">×</button>
    </div>
    <form  class="form-building form-material ng-untouched ng-pristine ng-valid" novalidate="">
      <div  class="modal-body clearfix">
        <div class="modal-left">
          <div  class="dropify-wrapper" id = "newImgPath">
            <div  class="dropify-message">
              <img [src]="'/proxy'+newRoom.imgPath" *ngIf="newRoom.imgPath">
            </div>
            <p>点击此处上传房间平面图</p>
            <input  class="dropify" type="file" #pres  id="pres"
                    (change)="presepic_upload(pres.files)"
                    (blur)="verifyImgPath(newRoom.imgPath,'newImgPath')">
          </div>
        </div>
        <div   class="modal-right">
          <div  class="form-group">
            <label  class="control-label"><span>房间号</span>
              <input class="form-control" id="newRoomNum"
                     name="roomNum" placeholder="" type="text"
                     [(ngModel)]="newRoom.roomNum"
                     (blur)="verifyEmpty(newRoom.roomNum,'newRoomNum');">
            </label>
            <div class="error"></div>
          </div>
          <div class="form-group">
            <label class="control-label"><span>房间用途</span>
              <select  class="form-control" id="newRoomUse"
                       name="roomUse"
                       [(ngModel)]="newRoom.roomUse"
                       (blur)="verifyEmpty(newRoom.roomUse,'newRoomUse');"
                       >
                <option value="">请选择</option>
                <option>总经理办公室</option>
                <option>副总经理办公室</option>
                <option>中层办公室</option>
                <option>员工办公室</option>
                <option>会议室</option>
                <option>电视电话会议室</option>
                <option>接待室</option>
                <option>休息间</option>
                <option>茶水间</option>
                <option>文印室</option>
                <option>员工餐厅</option>
                <option>餐厅包间</option>
                <option>厨房</option>
                <option>洗手间</option>
                <option>设备间</option>
                <option>多功能厅</option>
                <option>活动室</option>
                <option>职工小小家</option>
                <option>员工服务中心</option>
                <option>其他</option>
              </select>
            </label>
            <div class="error"></div>
          </div>
          <div  class="form-group">
            <label  class="control-label"><span>房间面积</span>
              <input class="form-control" id="newRoomArea"
                     name="roomArea" placeholder="" type="text"
                     [(ngModel)]="newRoom.roomArea"
                     (blur)="verifyEmpty(newRoom.roomArea,'newRoomArea');">
            </label>
            <div class="error"></div>
          </div>
          <div  class="form-group" *ngIf="newRoom.roomUse == '员工办公室'">
            <label  class="control-label"><span>设计座位数</span>
              <input class="form-control" id="newSeatingNum"
                     name="seatingNum" placeholder="" type="text"
                     [(ngModel)]="newRoom.seatingNum"
                     (blur)="verifySeatNumber(newRoom.seatingNum,'newSeatingNum');"
              >
            </label>
            <div class="error"></div>
          </div>
          <div  class="form-group">
            <label  class="control-label"><span>实际用途</span>
              <input class="form-control" id="newRoomUserReal"
                     name="roomUseReal" placeholder="" type="text"
                     [(ngModel)]="newRoom.roomUseReal"
                     (blur)="verifyEmpty(newRoom.roomUseReal,'newRoomUserReal');verifyMaxLength(newRoom.roomUseReal,'newRoomUserReal',50)"
              >
            </label>
            <div class="error"></div>
          </div>
        </div>
      </div>
      <div  class="modal-footer">
        <button  class="btn btn-danger" type="button"
                 (click)="closeNewView()">取 消</button>
        <button  class="btn btn-info" type="submit"
                 (click)="submit()">保 存</button>
      </div>
    </form>
  </div>
</div>
<!--图片查看器-->
<div class="view-img" [hidden]="isViewImg">
  <div class="back"></div>
  <span class="close" (click)="closeViewImg()"></span>
  <img class="big-img" [ngStyle]="{'width':imgWidth+'px','margin-left':- imgWidth/2 +'px'}"
       [src]="imgSrcView">
  <div class="option-bar">
    <span class="enlarge" (click)="addImg()"></span>
    <span class="less" (click)="decsImg()"></span>
  </div>
</div>
